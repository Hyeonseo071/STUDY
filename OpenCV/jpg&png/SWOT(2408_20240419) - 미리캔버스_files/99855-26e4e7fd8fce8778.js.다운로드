"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[99855],{27588:function(n,e,t){t.d(e,{Q:function(){return i}});var r=t(98964),o=t(66080);let i=n=>(0,r.EQ)(n).with(o._l,o.Ih,()=>"USER_IMAGE").with(o.dB,()=>"USER_ANIMATE_IMG").with(o.tU,()=>"USER_SVG").with(o.ml,()=>"USER_VIDEO").with(o.Xn,o.ty,()=>"USER_AUDIO").run()},97070:function(n,e,t){t.d(e,{u:function(){return l}});var r=t(733),o=t(55629),i=t(51497);let l=n=>(0,o.NS)(i.a.getUserResourceListInfinite(n),async e=>{let{pageParam:t={page:1,cursor:"",pageSize:20}}=e,o=await (0,r.getUserResourceList)({...n,page:t.page,...(""===t.cursor||!!t.cursor)&&{cursor:t.cursor}});return{...o,pageParam:{...t,pageSize:n.pageSize}}},{enabled:!!n.teamIdx&&!!n.parentFolderIdx,getNextPageParam:n=>{var e;if(n.data.cursor)return{page:n.pageParam.page+1,cursor:null!==(e=n.data.cursor)&&void 0!==e?e:null}}})},90943:function(n,e,t){t.d(e,{l:function(){return i}});var r=t(67294),o=t(94460);let i=()=>{let{publish:n}=(0,o.j)(),e=(0,r.useCallback)((e,t,r,o)=>{n("COMMAND_ADD_USER_RESOURCE",{fileKey:e,fileKind:t,coordinate:r,isDragging:o})},[n]);return{addUserFile:e}}},96447:function(n,e,t){t.d(e,{O:function(){return l}});var r=t(733),o=t(55629),i=t(51497);let l=n=>(0,o.NS)(i.a.getFolderListInfinite(n),async e=>{let{pageParam:t={page:1,cursor:"",pageSize:20}}=e,o=await (0,r.getFolderList)({...n,page:t.page,...(""===t.cursor||!!t.cursor)&&{cursor:t.cursor}});return{...o,pageParam:{...t,pageSize:n.pageSize}}},{enabled:!!n.teamIdx&&"0"!==n.parentFolderIdx,getNextPageParam:n=>{var e;if(n.data.cursor)return{page:n.pageParam.page+1,cursor:null!==(e=n.data.cursor)&&void 0!==e?e:null}}})},98889:function(n,e,t){t.d(e,{P:function(){return a},t:function(){return l}});var r=t(733),o=t(55629),i=t(51497);let l=n=>(0,o.aM)({queryFn:()=>(0,r.getFolderByIdx)(n),queryKey:i.a.getFolderByIdx(n),options:{enabled:!!n&&"0"!==n}}),a=()=>{let n=(0,o.Db)(r.createFolder),e=(0,o.Db)(r.deleteFolderItemsToTrash),t=(0,o.Db)(r.updateFolder),i=(0,o.Db)(r.updateFolder),l=(0,o.Db)(r.moveOrDeleteFolder),a=(0,o.Db)(r.moveOrDeleteFolder);return{moveFolderMutation:a,createFolderMutation:n,deleteFolderMutation:e,editFolderNameMutation:t,deleteAllUploadItemMutation:l,toggleFolderFavoriteMutation:i}}},16095:function(n,e,t){t.d(e,{K:function(){return l}});var r=t(67294),o=t(14861),i=t(67835);let l=()=>{let{selectedTeamIdx:n}=(0,o.x)(),{data:e}=(0,i.$A)(n);return(0,r.useMemo)(()=>{let n=null==e?void 0:e.data.planInfo.find(n=>"FOLDER"===n.type);return{folderRestriction:n&&n.restriction}},[null==e?void 0:e.data.planInfo])}},54847:function(n,e,t){t.d(e,{R:function(){return l}});var r=t(733),o=t(55629),i=t(51497);let l=n=>(0,o.aM)({queryKey:i.a.getDriveList(n),queryFn:()=>(0,r.getDriveList)(n),options:{enabled:!!n}})},5740:function(n,e,t){t.d(e,{H:function(){return i}});var r=t(94460),o=t(41458);let i=()=>{let{publish:n}=(0,r.j)(),e=async e=>new Promise((t,r)=>{n("COMMAND_GET_FILE_VALIDATION",{files:e},{onComplete:n=>{let e=[];if(n.results.forEach(n=>{n.isValid||e.push({file:n.file,code:n.restrictionTypeList[0]})}),0!==e.length){let n=e[0].code;r(new o.Lt({code:n,files:e.filter(e=>e.code===n).map(n=>n.file)}));return}t()}})});return{validateFiles:e}}},56158:function(n,e,t){t.d(e,{S:function(){return a},g:function(){return l}});var r=t(733),o=t(55629),i=t(51497);let l=()=>{let n=(0,o.Db)(r.deleteFolderItemsToTrash);return{deleteSelectedItemMutation:n}},a=n=>(0,o.aM)({queryFn:()=>(0,r.getUploadedFileCapacity)(n),queryKey:i.a.getUploadedFileCapacity(n),options:{enabled:!!n.teamIdx}})},84867:function(n,e,t){t.d(e,{ld:function(){return r.l},I5:function(){return a},m4:function(){return f}});var r=t(60839),o=t(98964),i=t(48065),l=t(98889);let a=n=>{var e,t;let{data:r}=(0,l.t)(n),a=null==r?void 0:r.data,u={folderCount:null!==(e=null==a?void 0:a.itemCounts.subFolderCount)&&void 0!==e?e:0,videoCount:0,audioCount:0,imageCount:0},{isUploadAnimateImgEnabled:c,isUploadVideoEnabled:d,isUploadAudioEnabled:s}=(0,i.yZ)(["UPLOAD_ANIMATE_IMG","UPLOAD_VIDEO","UPLOAD_AUDIO"]);Object.entries(null!==(t=null==a?void 0:a.itemCounts.uploadedItemCounts)&&void 0!==t?t:{}).forEach(n=>{let[e,t]=n;(0,o.EQ)(e).with("USER_VIDEO",()=>{d&&(u.videoCount+=t)}).with("USER_AUDIO",()=>{s&&(u.audioCount+=t)}).with("USER_IMAGE","USER_SVG",()=>{u.imageCount+=t}).with("USER_ANIMATE_IMG",()=>{c&&(u.imageCount+=t)}).run()});let f=Object.values(u).reduce((n,e)=>n+e,0),p=f-u.folderCount,h=u.folderCount;return{counts:u,totalResourceCount:f,fileCounts:p,folderCounts:h}};var u=t(97070),c=t(14861),d=t(96447),s=t(54847);let f=n=>{var e,t,r,l,a,f,p;let{resourceTypes:h,currentFolderIdx:x,searchKeyword:m}=n,{selectedTeamIdx:I}=(0,c.x)(),{data:_}=(0,s.R)(I),g=null==_?void 0:_.data,{isUploadAnimateImgEnabled:E,isUploadVideoEnabled:w,isUploadAudioEnabled:C}=(0,i.yZ)(["UPLOAD_ANIMATE_IMG","UPLOAD_VIDEO","UPLOAD_AUDIO"]),{data:A,fetchNextPage:v,hasNextPage:y,isFetchingNextPage:D}=(0,d.O)({teamIdx:I,titleToken:m,parentFolderIdx:null!==(l=null==x?void 0:x.toString())&&void 0!==l?l:null==g?void 0:null===(e=g.myDrive)||void 0===e?void 0:e.id,pageSize:20,inRecycleBin:!1,inRootFolder:!1,spaceType:"PERSONAL_SCOPE",sortOrder:"UPDATEDATE",sortOrderReverse:!1}),{data:S,fetchNextPage:M,hasNextPage:P,isFetchingNextPage:T}=(0,u.u)({teamIdx:I,parentFolderIdx:null!==(a=null==x?void 0:x.toString())&&void 0!==a?a:null==g?void 0:null===(t=g.myDrive)||void 0===t?void 0:t.id,spaceType:"PERSONAL_SCOPE",titleToken:m,types:h.filter(n=>(0,o.EQ)(n).with("USER_ANIMATE_IMG",()=>E).with("USER_VIDEO",()=>w).with("USER_AUDIO",()=>C).otherwise(()=>!0)),pageSize:20}),R=null!==(f=null==S?void 0:null===(r=S.pages)||void 0===r?void 0:r.flatMap(n=>n.data.list))&&void 0!==f?f:[],O=null!==(p=null==A?void 0:A.pages.flatMap(n=>n.data.list))&&void 0!==p?p:[],N=()=>{!T&&P&&M()},U=()=>{!D&&y&&v()};return{folderList:O,loadMoreFolders:U,isFetchingNextFilePage:T,isFetchingNextFolderPage:D,fileList:R,loadMoreFiles:N}}},55394:function(n,e,t){t.d(e,{l:function(){return i}});var r=t(98964),o=t(14861);let i=()=>{let{imageUploadSizeLimit:n,animatedUploadSizeLimit:e,svgUploadSizeLimit:t,videoUploadSizeLimit:i,totalUploadSizeLimit:l}=(0,o.x)(),a=o=>(0,r.EQ)(o).with("USER_ANIMATE_IMG",()=>e).with("USER_VIDEO",()=>i).with("USER_AUDIO",()=>52428800).with("USER_SVG",()=>t).with("USER_IMAGE",()=>n).otherwise(()=>n);return{totalUploadSizeLimit:l,getUploadSizeLimit:a}}},98603:function(n,e,t){t.d(e,{p:function(){return i}});var r=t(14861),o=t(67835);let i=()=>{let{selectedTeamIdx:n}=(0,r.x)(),{data:e}=(0,o.$A)(n),t=null==e?void 0:e.data.planInfo.find(n=>"MY_DRIVE"===n.type);return(null==t?void 0:t.type)==="MY_DRIVE"?t.restriction.storageMaxSize:0}},72366:function(n,e,t){t.d(e,{l:function(){return i}});var r=t(14861),o=t(56158);let i=()=>{var n;let{selectedTeamIdx:e}=(0,r.x)(),{data:t}=(0,o.S)({teamIdx:e,teamScope:"INDIVIDUAL"});return null!==(n=null==t?void 0:t.data)&&void 0!==n?n:0}},60839:function(n,e,t){t.d(e,{l:function(){return i}});var r=t(14861),o=t(54847);let i=n=>{let{selectedTeamIdx:e}=(0,r.x)(),{data:t}=(0,o.R)(e),i=null==t?void 0:t.data;return{isRootFolder:(null==i?void 0:i.myDrive.id)===n,rootFolderIdx:null==i?void 0:i.myDrive.id}}},50396:function(n,e,t){t.d(e,{a:function(){return c}});var r=t(98964),o=t(48065),i=t(66080);let l=[i.z1,i._l,i.Ih,i.tU,i.dB,i.ml,i.ty,i.Xn],a=[".jpg",".svg",".png",".mp4",".gif",".mp3",".m4a"],u=["UPLOAD_VIDEO","UPLOAD_AUDIO","UPLOAD_ANIMATE_IMG"],c=()=>{let{isUploadVideoEnabled:n,isUploadAudioEnabled:e,isUploadAnimateImgEnabled:t}=(0,o.yZ)(u);return{extensions:a.filter(o=>(0,r.EQ)(o).with(".mp4",()=>n).with(".mp3",".m4a",()=>e).with(".gif",()=>t).otherwise(()=>!0)),mimeTypes:l.filter(o=>(0,r.EQ)(o).with("video/mp4",()=>n).with("audio/mpeg","audio/x-m4a",()=>e).with("image/gif",()=>t).otherwise(()=>!0))}}},89547:function(n,e,t){t.d(e,{D:function(){return l}});var r=t(23115),o=t(14355),i=t(46934);let l=async n=>{let e=(0,o.NU)(n),t=(0,o.TN)(n),l=e||t?URL.createObjectURL(n):await (0,o.hR)(n),a=t?(0,r.tV)(l):e?await (0,r.wF)(l):await (0,r.Fd)(l),u={width:a.width,height:a.height},c=Date.now()+(0,i.xT)({min:1,max:1e6});return{resourceUrl:l,uploadKey:c,fileMeta:u}}},6673:function(n,e,t){t.d(e,{Vt:function(){return i},ez:function(){return l},qm:function(){return a}});var r=t(66080),o=t(41458);let i=104857600,l=52428800,a=(n,e,t)=>new Promise((r,i)=>{var l,a,p,h;s(n.length,null!==(l=null==e?void 0:e.itemCount)&&void 0!==l?l:0,null!==(a=null==t?void 0:t.childItemMaxCount)&&void 0!==a?a:200,Boolean(null==e?void 0:e.isRootFolder))||i(new o.iT("INVALID_TOTAL_ITEM_COUNT")),f(n,{storageMaxSize:null!==(p=null==t?void 0:t.storageMaxSize)&&void 0!==p?p:0,currentStorageUsage:null!==(h=null==t?void 0:t.currentStorageUsage)&&void 0!==h?h:0})||i(new o.iT("INVALID_TOTAL_FILE_SIZE")),u(n.length)||i(new o.iT("INVALID_FILE_COUNT")),d(n)||i(new o.iT("INVALID_TOTAL_AUDIO_FILE_SIZE")),c(n)||i(new o.iT("INVALID_TOTAL_VIDEO_FILE_SIZE")),r()}),u=n=>n<=50,c=n=>p(n)<i,d=n=>h(n)<l,s=(n,e,t,r)=>!!r||n+e<=t,f=(n,e)=>x(n)+e.currentStorageUsage<e.storageMaxSize,p=n=>Array.from(n).filter(n=>n.type===r.ml).reduce((n,e)=>n+e.size,0),h=n=>Array.from(n).filter(n=>[r.Xn,r.ty].includes(n.type)).reduce((n,e)=>n+e.size,0),x=n=>Array.from(n).reduce((n,e)=>n+e.size,0)},41458:function(n,e,t){t.d(e,{Lt:function(){return r},iT:function(){return o}});class r extends Error{constructor(n){super(),this.param=n}}class o extends Error{constructor(n){super(),this.code=n}}},44567:function(n,e,t){t.d(e,{a:function(){return C}});var r=t(7297),o=t(85893),i=t(88095),l=t(71210),a=t(63967),u=t(1123),c=t(26388);function d(){let n=(0,r.Z)(["\n  display: flex;\n  padding: ",";\n  flex-direction: column;\n  align-items: center;\n  ",";\n"]);return d=function(){return n},n}function s(){let n=(0,r.Z)(["\n  text-align: center;\n  color: ",";\n  font: ",";\n"]);return s=function(){return n},n}let f=n=>{let{padding:e,title:t,children:r,flexGap:i}=n;return(0,o.jsxs)(p,{padding:e,flexGap:i,children:[(0,o.jsx)(h,{children:t}),r]})},p=i.ZP.div.withConfig({componentId:"sc-27c29b3f-0"})(d(),n=>{let{padding:e}=n;return e},n=>{let{theme:e,flexGap:t}=n;return e.mixin.flexRowGap(t)}),h=i.ZP.h3.withConfig({componentId:"sc-27c29b3f-1"})(s(),n=>{let{theme:e}=n;return e.token.s_color_contents_default},n=>{let{theme:e}=n;return e.token.s_typography_title_L});var x=t(25265);function m(){let n=(0,r.Z)(["\n  display: flex;\n  padding: 16px 16px 8px 16px;\n  width: 100%;\n  height: 56px;\n  justify-content: flex-end;\n  align-items: flex-start;\n  ",";\n"]);return m=function(){return n},n}let I=n=>{let{showCloseIcon:e,onClickCloseButton:t,onClose:r}=n;return(0,o.jsx)(_,{children:e&&(0,o.jsx)(x.h,{onClick:()=>{null==t||t(),r()},iconName:"close",size:"S",type:"ghost",color:"neutralLight",shape:"square"})})},_=i.ZP.div.withConfig({componentId:"sc-599e702d-0"})(m(),n=>{let{theme:e}=n;return e.mixin.flexColGap("10px")});function g(){let n=(0,r.Z)(["\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n\n  border-radius: 16px;\n  background-color: ",";\n  box-shadow: 0px 16px 24px 0px rgba(0, 0, 0, 0.08);\n"]);return g=function(){return n},n}function E(){let n=(0,r.Z)(["\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: calc(100vw - 40px);\n  max-width: 480px;\n\n  border-radius: 16px;\n  background-color: ",";\n  box-shadow: 0px 16px 24px 0px rgba(0, 0, 0, 0.08);\n"]);return E=function(){return n},n}function w(){let n=(0,r.Z)(["\n  display: flex;\n  width: 100%;\n  padding: ",";\n  justify-content: center;\n  align-items: center;\n"]);return w=function(){return n},n}let C=n=>{let{width:e="400px",padding:t="0px 40px 20px 40px",cancelText:r,confirmText:i,onClose:a,onConfirm:u,title:d,showCloseIcon:s=!0,showCancelButton:f=!0,closeOnClickBackground:p=!0,confirmDisabled:h=!1,confirmLoading:x=!1,children:m,onClickCloseButton:I,onClickCancelButton:_}=n;return(0,o.jsxs)(l.u,{closeOnClickBackground:p,show:!0,children:[(0,o.jsx)(c.z,{from:768,children:(0,o.jsx)(A,{width:e,padding:t,cancelText:r,showCloseIcon:s,showCancelButton:f,confirmDisabled:h,confirmLoading:x,title:d,confirmText:i,onConfirm:u,onClose:a,onClickCloseButton:I,onClickCancelButton:_,children:m})}),(0,o.jsx)(c.z,{to:767,children:(0,o.jsx)(v,{width:e,padding:t,cancelText:r,showCloseIcon:s,showCancelButton:f,confirmDisabled:h,confirmLoading:x,title:d,confirmText:i,onConfirm:u,onClose:a,onClickCloseButton:I,onClickCancelButton:_,children:m})})]})},A=n=>{let{width:e="400px",padding:t="0px 40px 20px 40px",cancelText:r,confirmText:i,onClose:l,onConfirm:c,title:d,showCloseIcon:s=!0,showCancelButton:p=!0,confirmDisabled:h=!1,confirmLoading:x=!1,children:m,onClickCloseButton:_,onClickCancelButton:g}=n;return(0,o.jsxs)(y,{style:{width:e},children:[(0,o.jsx)(I,{showCloseIcon:s,onClickCloseButton:_,onClose:l}),(0,o.jsx)(f,{padding:t,flexGap:"20px",title:d,children:m}),(0,o.jsx)(S,{padding:"20px 32px 32px 32px",children:(0,o.jsxs)(a.h,{widthType:p?"fill":"hug",aligment:"center",gap:"M",justify:"center",children:[p&&(0,o.jsx)(u.Jr,{size:"M",type:"fillLight",shape:"square",color:"neutralDeep",text:r,onClick:()=>{null==g||g(),l()}}),(0,o.jsx)(u.Jr,{size:"M",type:"fill",widthType:p?"fill":"fixed",width:"128px",shape:"square",color:"primary",disabled:h||x,loading:x,text:i,onClick:async()=>{await c(),l()}})]})})]})},v=n=>{let{padding:e="0px 40px 20px 40px",cancelText:t,confirmText:r,onClose:i,onConfirm:l,title:c,showCloseIcon:d=!0,showCancelButton:s=!0,confirmDisabled:p=!1,confirmLoading:h=!1,children:x,onClickCloseButton:m,onClickCancelButton:_}=n;return(0,o.jsxs)(D,{children:[(0,o.jsx)(I,{showCloseIcon:d,onClickCloseButton:m,onClose:i}),(0,o.jsx)(f,{padding:e,flexGap:"12px",title:c,children:x}),(0,o.jsx)(S,{padding:"20px 32px 40px 32px",children:(0,o.jsxs)(a.h,{widthType:s?"fill":"hug",aligment:"center",gap:"M",justify:"center",direction:"vertical",children:[(0,o.jsx)(u.Jr,{size:"M",type:"fill",widthType:"fixed",width:"100%",shape:"square",color:"primary",disabled:p||h,loading:h,text:r,onClick:async()=>{await l(),i()}}),s&&(0,o.jsx)(u.Jr,{size:"M",type:"fillLight",widthType:"fixed",width:"100%",shape:"square",color:"neutralDeep",text:t,onClick:()=>{null==_||_(),i()}})]})})]})},y=i.ZP.div.withConfig({componentId:"sc-19335be1-0"})(g(),n=>{let{theme:e}=n;return e.token.s_color_background_default}),D=i.ZP.div.withConfig({componentId:"sc-19335be1-1"})(E(),n=>{let{theme:e}=n;return e.token.s_color_background_elevation02}),S=i.ZP.div.withConfig({componentId:"sc-19335be1-2"})(w(),n=>{let{padding:e}=n;return e})},99855:function(n,e,t){t.d(e,{F:function(){return J}});var r=t(84867),o=t(14861),i=t(733),l=t(27588),a=t(67294),u=t(94460);let c=()=>{let{publish:n}=(0,u.j)(),e=(0,a.useCallback)(e=>{n("COMMAND_SET_USER_FILE",{fileData:e})},[n]);return{setUserFile:e}};var d=t(90943),s=t(16095);let f=n=>{let{file:e,key:t,fileMeta:r,thumbnailUrl:o}=n;return{filename:e.name,editingThumbnail:"",fileSize:e.size,originUrl:"",folderId:"0",updateDate:0,uploadDate:0,createdType:"",ownerName:"",status:"",name:e.name,fileKey:String(t),fileMeta:JSON.stringify(r),thumbnail:o,id:t,type:(0,l.Q)(e.type)}};var p=t(89547),h=t(6673),x=t(55629),m=t(14355),I=t(17757);let _=()=>{let{publish:n}=(0,u.j)(),e=async e=>{n("COMMAND_REMOVE_UPLOAD_FAILED_ITEM",{fileKey:e})};return{removeUploadFailItemCommand:e}},g=()=>{let{publish:n}=(0,u.j)(),e=async e=>{let{file:t,fileKey:r}=e;return new Promise((e,o)=>{n("COMMAND_CACHE_FILE_WITH_TEMPORARY_KEY",{fileWithKeyList:[{file:t,fileKey:r}]},{onComplete:n=>{n||o(Error("file key error")),e()}})})};return{registerFileKeyToEditor:e}};var E=t(5740);let w={UPLOAD_ITEM_COUNT_LIMIT:"UPLOAD_ITEM_COUNT_LIMIT"};class C extends Error{constructor(n){super(),this.code=n}}var A=t(98603),v=t(72366),y=t(60839);let D=()=>{let n=(0,x.NL)(),e=(0,v.l)(),t=(0,A.p)(),{validateFiles:r}=(0,E.H)(),{addUserFile:o}=(0,d.l)(),{setUserFile:a}=c(),{removeUploadFailItemCommand:u}=_(),{registerFileKeyToEditor:I}=g(),{folderRestriction:w}=(0,s.K)(),{rootFolderIdx:C}=(0,y.l)(),D=async c=>{let{params:d,onUploadReady:s,onUpdateUploadProgress:x,onUploadSuccess:_,onUploadError:g}=c,{files:E,folderIdx:A,teamIdx:v,isDroppedInEditor:y,currentFileItemCount:D}=d,P=new Map,R=[];try{let c=(0,m.yM)(E);await (0,h.qm)(c,{itemCount:D,isRootFolder:C===A},{childItemMaxCount:null==w?void 0:w.childItemMaxCount,currentStorageUsage:e,storageMaxSize:t}),await r(c);let d=E.map(async n=>{let{category:e}=n,t=await (0,m.u0)(n),{fileMeta:r,uploadKey:a,resourceUrl:u}=await (0,p.D)(t);await I({file:t,fileKey:String(a)}),s(f({file:t,key:String(a),fileMeta:r,thumbnailUrl:u}));let c=(0,l.Q)(t.type);return y&&o(String(a),c),y&&P.set(String(a),String(a)),(0,i.uploadUserResource)(c.toLowerCase(),{file:t,key:String(a),teamIdx:v,resourceType:c,folderIdx:"USER_AUDIO"!==c?String(A):void 0,extraData:{...r,category:e},teamScope:"INDIVIDUAL"},{onUploadProgress:n=>{var e;x(a,null!==(e=n.progress)&&void 0!==e?e:0)}})}),g=await Promise.allSettled(d),O=g.map(n=>M(n,{onMutateFulfilledWithNoError:n=>{R.push(n.data),a(n.data),P.delete(n.data.requestKey)}})).filter(n=>Boolean(n));if(T(n),S(P,u),O.length>0&&O[0])throw O[0];_(R)}catch(n){g(n)}finally{S(P,u)}};return{uploadUserFiles:D}},S=(n,e)=>{let t=Array.from(n.values());t.forEach(t=>{e(t),n.delete(t)})},M=(n,e)=>{let{onMutateFulfilledWithNoError:t}=e;if(!(0,I.r)(n))return Error(n.reason);{let e=P(n);if(e)return e;t(n.value)}},P=n=>"ITEM_COUNT_IN_FOLDER_EXCESS"===n.value.resultCode&&"ITEM"===n.value.messageCode?new C(w.UPLOAD_ITEM_COUNT_LIMIT):"SUCCESS"!==n.value.resultCode?Error(n.value.messageCode):null,T=n=>{n.invalidateQueries(["getFolderListInfinite"]),n.invalidateQueries(["getUserResourceListInfinite"]),n.invalidateQueries(["getFolderByIdx"]),n.invalidateQueries(["getUploadedFileCapacity"])};var R=t(41458),O=t(34143),N=t(11826),U=t(93558),L=t(66080),b=t(51055),j=t(7297),F=t(85893),Z=t(88095),k=t(87140),H=t(95135),V=t(44567);function z(){let n=(0,j.Z)(["\n  display: flex;\n  width: 100%;\n  flex-direction: column;\n  align-items: center;\n"]);return z=function(){return n},n}function G(){let n=(0,j.Z)(["\n  color: ",";\n  font: ",";\n  text-align: center;\n  margin-bottom: 24px;\n  width: 100%;\n"]);return G=function(){return n},n}function B(){let n=(0,j.Z)(["\n  width: 100%;\n  color: ",";\n"]);return B=function(){return n},n}function Q(){let n=(0,j.Z)(["\n  list-style: disc;\n  list-style-position: inside;\n  ",";\n  width: 100%;\n  font: ",";\n"]);return Q=function(){return n},n}let q=n=>{let{onClose:e,onConfirm:t,files:r}=n,{translate:o}=(0,H.$G)();return(0,F.jsx)(V.a,{width:"480px",onConfirm:t,onClose:e,cancelText:o("SHARED.POPUP.POPUP.NAMING_POPUP.ACTION.CANCEL"),title:o("SHARED.REMAIN_372"),confirmText:o("SHARED.REMAIN_375"),children:(0,F.jsxs)(K,{children:[(0,F.jsx)($,{children:o("SHARED.REMAIN_373")}),(0,F.jsx)(k.U,{showCloseButton:!1,showIcon:!1,children:(0,F.jsx)(W,{children:r.map(n=>(0,F.jsx)(X,{children:n.name},n.name))})})]})})},K=Z.ZP.div.withConfig({componentId:"sc-d0fb048a-0"})(z()),$=Z.ZP.div.withConfig({componentId:"sc-d0fb048a-1"})(G(),n=>{let{theme:e}=n;return e.token.s_color_contents_sub},n=>{let{theme:e}=n;return e.token.s_typography_body_M}),W=Z.ZP.ul.withConfig({componentId:"sc-d0fb048a-2"})(B(),n=>{let{theme:e}=n;return e.token.s_color_contents_sub}),X=Z.ZP.li.withConfig({componentId:"sc-d0fb048a-3"})(Q(),n=>{let{theme:e}=n;return e.mixin.textOverflow()},n=>{let{theme:e}=n;return e.token.c_banner_typography_sub_M}),Y=()=>{let{openPopup:n,closePopup:e}=(0,b.B)(),t=async t=>{let r=Array.from(t).filter(n=>[L.Xn,L.ty].includes(n.type));return new Promise(t=>{if(0===r.length){t(!0);return}n({component:q,props:{files:r,onConfirm:()=>{e(),t(!0)},onClose:()=>{e(),t(!1)}}})})};return{checkBeforeUpload:t}},J=()=>{let{uploadUserFiles:n}=D(),{selectedTeamIdx:e}=(0,o.x)(),t=(0,O.TW)(),i=(0,O.zi)(),l=(0,O.N3)(),{fileCounts:a}=(0,r.I5)(t),{checkBeforeUpload:u}=Y(),{openPreValidationErrorNotice:c}=(0,U.H)(),{openErrorNotice:d}=(0,U.z6)(),{openAlreadyUploadingPopup:s}=(0,U.OF)(),{openUnknownFileUploadErrorPopup:f}=(0,U.X$)(),p=(0,O.Pg)(),h=(0,O.X0)(),x=(0,N.f)(h,800),I=r=>{let{files:o,onResetInput:h,isDroppedInEditor:I,onUploadSuccess:_}=r;if(i){s();return}let g=()=>{p([]),null==h||h()};l("ALL"),(async()=>{if(o){let r=await u((0,m.yM)(o));if(!r){null==h||h();return}await n({params:{isDroppedInEditor:I,files:o,folderIdx:null!=t?t:"0",teamIdx:e,currentFileItemCount:a},onUploadReady:n=>{p(e=>[...e,n])},onUpdateUploadProgress:(n,e)=>{x(t=>({...t,[n]:e}))},onUploadSuccess:n=>{null==_||_(n),g()},onUploadError:n=>{if(n instanceof R.iT){c(n.code),g();return}if(n instanceof R.Lt){d(n),g();return}if(n instanceof C){c("INVALID_TOTAL_ITEM_COUNT"),g();return}if(n&&!window.navigator.onLine){f(),g();return}f(),g()}})}})()};return{handleFileUpload:I}}},75923:function(n,e,t){t.d(e,{H:function(){return d}});var r=t(7297),o=t(85893),i=t(88095),l=t(95135),a=t(44567);function u(){let n=(0,r.Z)(["\n  display: flex;\n  width: 100%;\n  flex-direction: column;\n  align-items: center;\n"]);return u=function(){return n},n}function c(){let n=(0,r.Z)(["\n  color: ",";\n  font: ",";\n  text-align: center;\n"]);return c=function(){return n},n}let d=n=>{let{onClose:e,childItemMaxCount:t}=n,{translate:r}=(0,l.$G)();return(0,o.jsx)(a.a,{width:"490px",onConfirm:e,onClose:e,title:r("SHARED.REMAIN_419"),confirmText:r("SHARED.POPUP.POPUP.CONFIRM"),showCancelButton:!1,children:(0,o.jsx)(s,{children:(0,o.jsx)(f,{children:r("SHARED.REMAIN_420",{childItemMaxCount:t})})})})},s=i.ZP.div.withConfig({componentId:"sc-81c1ed2a-0"})(u()),f=i.ZP.div.withConfig({componentId:"sc-81c1ed2a-1"})(c(),n=>{let{theme:e}=n;return e.token.s_color_contents_sub},n=>{let{theme:e}=n;return e.token.s_typography_body_M})},93558:function(n,e,t){t.d(e,{OF:function(){return nr},X$:function(){return nt},H:function(){return nn},z6:function(){return ne}});var r=t(98964),o=t(27588),i=t(16095),l=t(55394),a=t(50396),u=t(6673),c=t(95135),d=t(51055),s=t(14355),f=t(75923),p=t(7297),h=t(85893),x=t(88095),m=t(87140),I=t(44567);function _(){let n=(0,p.Z)(["\n  display: flex;\n  width: 100%;\n  flex-direction: column;\n  align-items: center;\n"]);return _=function(){return n},n}function g(){let n=(0,p.Z)(["\n  width: 100%;\n  padding: 0 16px;\n"]);return g=function(){return n},n}function E(){let n=(0,p.Z)(["\n  color: ",";\n  font: ",";\n  text-align: center;\n  margin-bottom: 24px;\n"]);return E=function(){return n},n}function w(){let n=(0,p.Z)(["\n  width: 100%;\n  list-style: disc;\n  color: ",";\n  font: ",";\n"]);return w=function(){return n},n}function C(){let n=(0,p.Z)(["\n  width: 100%;\n  display: block;\n  ",";\n"]);return C=function(){return n},n}let A=n=>{let{onClose:e,onConfirm:t,filenames:r}=n,{translate:o}=(0,c.$G)();return(0,h.jsx)(I.a,{width:"480px",onConfirm:t,onClose:e,title:o("SHARED.SHARED_82"),confirmText:o("SHARED.POPUP.POPUP.CONFIRM"),showCancelButton:!1,children:(0,h.jsxs)(v,{children:[(0,h.jsx)(D,{children:o("SHARED.SHARED_83")}),(0,h.jsx)(m.U,{showCloseButton:!1,showIcon:!1,children:(0,h.jsx)(y,{children:r.map(n=>(0,h.jsx)(S,{children:(0,h.jsx)(M,{children:n})},"filename"+n))})})]})})},v=x.ZP.div.withConfig({componentId:"sc-3dc49b6c-0"})(_()),y=x.ZP.ul.withConfig({componentId:"sc-3dc49b6c-1"})(g()),D=x.ZP.div.withConfig({componentId:"sc-3dc49b6c-2"})(E(),n=>{let{theme:e}=n;return e.token.s_color_contents_sub},n=>{let{theme:e}=n;return e.token.s_typography_body_M}),S=x.ZP.li.withConfig({componentId:"sc-3dc49b6c-3"})(w(),n=>{let{theme:e}=n;return e.token.s_color_contents_sub},n=>{let{theme:e}=n;return e.token.c_banner_typography_sub_M}),M=x.ZP.span.withConfig({componentId:"sc-3dc49b6c-4"})(C(),n=>{let{theme:e}=n;return e.mixin.textOverflow()});var P=t(13821);let T=n=>{let{onClose:e,onConfirm:t,filenames:r}=n;return{onClose:e,onConfirm:t,filenames:r}};function R(){let n=(0,p.Z)(["\n  display: flex;\n  width: 100%;\n  flex-direction: column;\n  align-items: center;\n"]);return R=function(){return n},n}function O(){let n=(0,p.Z)(["\n  width: 100%;\n  padding: 0 16px;\n"]);return O=function(){return n},n}function N(){let n=(0,p.Z)(["\n  color: ",";\n  font: ",";\n  text-align: center;\n  margin-bottom: 24px;\n"]);return N=function(){return n},n}function U(){let n=(0,p.Z)(["\n  width: 100%;\n  list-style: disc;\n  color: ",";\n  font: ",";\n"]);return U=function(){return n},n}function L(){let n=(0,p.Z)(["\n  width: 100%;\n  display: block;\n  ",";\n"]);return L=function(){return n},n}let b=(0,P.RW)(T,n=>{let{onClose:e,onConfirm:t,filenames:r,translate:o}=n;return(0,h.jsx)(I.a,{width:"480px",onConfirm:t,onClose:e,title:o("SHARED.SHARED_82"),confirmText:o("SHARED.POPUP.POPUP.CONFIRM"),showCancelButton:!1,children:(0,h.jsxs)(j,{children:[(0,h.jsx)(Z,{children:o("SHARED.SHARED_236")}),(0,h.jsx)(m.U,{showCloseButton:!1,showIcon:!1,children:(0,h.jsx)(F,{children:r.map(n=>(0,h.jsx)(k,{children:(0,h.jsx)(H,{children:n})},"filename"+n))})})]})})}),j=x.ZP.div.withConfig({componentId:"sc-4743c024-0"})(R()),F=x.ZP.ul.withConfig({componentId:"sc-4743c024-1"})(O()),Z=x.ZP.div.withConfig({componentId:"sc-4743c024-2"})(N(),n=>{let{theme:e}=n;return e.token.s_color_contents_sub},n=>{let{theme:e}=n;return e.token.s_typography_body_M}),k=x.ZP.li.withConfig({componentId:"sc-4743c024-3"})(U(),n=>{let{theme:e}=n;return e.token.s_color_contents_sub},n=>{let{theme:e}=n;return e.token.c_banner_typography_sub_M}),H=x.ZP.span.withConfig({componentId:"sc-4743c024-4"})(L(),n=>{let{theme:e}=n;return e.mixin.textOverflow()});var V=t(19128),z=t(47875);function G(){let n=(0,p.Z)(["\n  display: flex;\n  width: 100%;\n  flex-direction: column;\n  align-items: center;\n"]);return G=function(){return n},n}function B(){let n=(0,p.Z)(["\n  color: ",";\n  font: ",";\n  & > button {\n    display: contents;\n  }\n"]);return B=function(){return n},n}let Q=n=>{let{onClose:e}=n,{translate:t}=(0,c.$G)();return(0,h.jsx)(I.a,{width:"480px",onConfirm:e,onClose:e,title:t("SHARED.REMAIN_376"),confirmText:t("SHARED.POPUP.POPUP.CONFIRM"),showCancelButton:!1,children:(0,h.jsx)(q,{children:(0,h.jsxs)(K,{children:[(0,h.jsx)("span",{children:t("SHARED.SHARED_84")}),(0,h.jsx)(V.A,{onClick:()=>window.open(z.H.RECYCLEBIN),text:t("SHARED.DETAIL_INFO_HYPER_LINK")})]})})})},q=x.ZP.div.withConfig({componentId:"sc-4d30f7c0-0"})(G()),K=x.ZP.div.withConfig({componentId:"sc-4d30f7c0-1"})(B(),n=>{let{theme:e}=n;return e.token.s_color_contents_sub},n=>{let{theme:e}=n;return e.token.s_typography_body_M});function $(){let n=(0,p.Z)(["\n  display: flex;\n  width: 100%;\n  flex-direction: column;\n  align-items: center;\n"]);return $=function(){return n},n}function W(){let n=(0,p.Z)(["\n  color: ",";\n  font: ",";\n  text-align: center;\n  margin-bottom: 24px;\n"]);return W=function(){return n},n}let X=n=>{let{onClose:e,onConfirm:t,message:r}=n,{translate:o}=(0,c.$G)();return(0,h.jsx)(I.a,{width:"480px",onConfirm:t,onClose:e,title:o("SHARED.AGENT.BRAND_KIT_MESSAGE.UPLOADING.SUBTITLE"),confirmText:o("SHARED.POPUP.POPUP.CONFIRM"),showCancelButton:!1,children:(0,h.jsx)(Y,{children:(0,h.jsx)(J,{children:r})})})},Y=x.ZP.div.withConfig({componentId:"sc-5cc1f30f-0"})($()),J=x.ZP.div.withConfig({componentId:"sc-5cc1f30f-1"})(W(),n=>{let{theme:e}=n;return e.token.s_color_contents_sub},n=>{let{theme:e}=n;return e.token.s_typography_body_M}),nn=()=>{let{translate:n}=(0,c.$G)(),{openUnknownFileUploadErrorPopup:e}=nt(),{openPopup:t,closePopup:o}=(0,d.B)(),{folderRestriction:l}=(0,i.K)(),a=()=>{alert(n("SHARED.REMAIN_406"))},p=()=>{let e=n("SHARED.REMAIN_409",{audioFilesMaxSize:(0,s.pT)(u.ez)});alert(e)},h=()=>{let e=n("SHARED.REMAIN_408",{videoFilesMaxSize:(0,s.pT)(u.Vt)});alert(e)},x=()=>{t({component:Q,props:{onClose:o}})},m=()=>{var n;t({component:f.H,props:{onClose:o,childItemMaxCount:null!==(n=null==l?void 0:l.childItemMaxCount)&&void 0!==n?n:200}})},I=n=>{(0,r.EQ)(n).with("INVALID_FILE_COUNT",()=>a()).with("INVALID_TOTAL_AUDIO_FILE_SIZE",()=>p()).with("INVALID_TOTAL_VIDEO_FILE_SIZE",()=>h()).with("INVALID_TOTAL_FILE_SIZE",()=>x()).with("INVALID_TOTAL_ITEM_COUNT",()=>m()).otherwise(()=>e())};return{openPreValidationErrorNotice:I}},ne=()=>{let{translate:n}=(0,c.$G)(),{openPopup:e,closePopup:t}=(0,d.B)(),{getUploadSizeLimit:i}=(0,l.l)(),{openUnknownFileUploadErrorPopup:u}=nt(),{extensions:f}=(0,a.a)(),p=n=>{e({component:A,props:{onClose:t,onConfirm:t,filenames:n}})},h=n=>{e({component:b,props:{onClose:t,onConfirm:t,filenames:n}})},x=e=>{let t=n("SHARED.REMAIN_411",{uploadSizeLimit:(0,s.pT)(i((0,o.Q)(e.type)))});alert(t+e.name)},m=e=>{let t=f.join(", "),r=n("SHARED.REMAIN_412",{fileTypesString:t});alert(r+"\n"+e.join(", "))},I=e=>{let t=n("SHARED.REMAIN_395");alert(t+"\n"+e.join(", "))},_=n=>{(0,r.EQ)(n.param.code).with("FILE_INVALID_SIZE",()=>x(n.param.files[0])).with("FILE_INVALID_EXTENSION",()=>m(n.param.files.map(n=>n.name))).with("FILE_INVALID_DIMENSION",()=>p(n.param.files.map(n=>n.name))).with("FILE_INVALID_WIDTH_HEIGHT_LIMIT",()=>h(n.param.files.map(n=>n.name))).with("FILE_INVALID_CONTENTS",()=>u()).with(r.P.string.regex(/SVG_.*/),()=>I(n.param.files.map(n=>n.name))).otherwise(()=>u())};return{openErrorNotice:_}},nt=()=>{let{openPopup:n,closePopup:e}=(0,d.B)(),{translate:t}=(0,c.$G)(),r=()=>{n({component:X,props:{onClose:e,onConfirm:e,message:t("SHARED.REMAIN_383")}})};return{openUnknownFileUploadErrorPopup:r}},nr=()=>{let{openPopup:n,closePopup:e}=(0,d.B)(),{translate:t}=(0,c.$G)(),r=()=>{n({component:X,props:{onClose:e,onConfirm:e,message:t("SHARED.REMAIN_391")}})};return{openAlreadyUploadingPopup:r}}},26388:function(n,e,t){t.d(e,{z:function(){return c}});var r=t(7297),o=t(85893),i=t(1852),l=t(67294),a=t(88095);function u(){let n=(0,r.Z)(["\n  @media only screen and (min-width: ",") and (max-width: ",") {\n    display: inherit;\n  }\n  display: none;\n"]);return u=function(){return n},n}let c=n=>{let{className:e,from:t=0,to:r=9999,as:i,useCss:l=!0,fallback:a=(0,o.jsx)(o.Fragment,{}),children:u}=n;return l?(0,o.jsx)(s,{className:e,from:t,to:r,as:i,children:u}):(0,o.jsx)(d,{size:{minWidth:t,maxWidth:r},renderComponent:u,fallback:a})},d=n=>{let{size:e,renderComponent:t,fallback:r=(0,o.jsx)(o.Fragment,{})}=n,a=(0,i.useMediaQuery)({minWidth:e.minWidth,maxWidth:e.maxWidth}),[u,c]=(0,l.useState)(void 0);return(0,l.useEffect)(()=>{c(a)},[a]),(0,o.jsx)(o.Fragment,{children:u?t:void 0===u&&r})},s=a.ZP.div.withConfig({componentId:"sc-5396589-0"})(u(),n=>n.from+"px",n=>n.to+"px")},46934:function(n,e,t){t.d(e,{F9:function(){return u},Fv:function(){return o},HU:function(){return a},t9:function(){return l},xT:function(){return r}});let r=n=>{let{min:e,max:t,excludeList:r=[]}=n,o=Array.from({length:t-e+1},(n,t)=>e+t),i=o.filter(n=>!r.includes(n)),l=Math.floor(Math.random()*i.length);return i[l]},o=function(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=Math.pow(Math.max(...n),-(t-e));return n.map(n=>n*r+e)},i=n=>!!("number"==typeof n&&!isNaN(n)&&isFinite(n)),l=n=>{let e=i(n)?n:-1;return e},a=(n,e,t)=>Math.min(Math.max(n,e),t),u=n=>new Intl.NumberFormat().format(n)},17757:function(n,e,t){t.d(e,{r:function(){return r}});let r=n=>(null==n?void 0:n.status)==="fulfilled"},11826:function(n,e,t){t.d(e,{f:function(){return i}});var r=t(67294),o=t(89080);let i=(n,e)=>(0,r.useMemo)(()=>(0,o.P2)(n,e),[n,e])}}]);